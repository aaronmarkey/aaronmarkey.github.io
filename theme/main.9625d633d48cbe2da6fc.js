function e(e){if(null==e)throw new TypeError(`Cannot destructure ${e}`)}function t(){return t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++)for(var r in source)Object.prototype.hasOwnProperty.call(source,r)&&(e[r]=source[r]);return e},t.apply(this,arguments)}var r={689:(r,n,i)=>{i.d(n,{lg:()=>ce,xI:()=>ke});class s{constructor(e,t,r){this.eventTarget=e,this.eventName=t,this.eventOptions=r,this.unorderedBindings=new Set}connect(){this.eventTarget.addEventListener(this.eventName,this,this.eventOptions)}disconnect(){this.eventTarget.removeEventListener(this.eventName,this,this.eventOptions)}bindingConnected(e){this.unorderedBindings.add(e)}bindingDisconnected(e){this.unorderedBindings.delete(e)}handleEvent(e){const t=a(e);for(const e of this.bindings){if(t.immediatePropagationStopped)break;e.handleEvent(t)}}hasBindings(){return this.unorderedBindings.size>0}get bindings(){return Array.from(this.unorderedBindings).sort((({index:e},{index:t})=>e<t?-1:e>t?1:0))}}var a=e=>{if("immediatePropagationStopped"in e)return e;{const{stopImmediatePropagation:t}=e;return Object.assign(e,{immediatePropagationStopped:!1,stopImmediatePropagation(){this.immediatePropagationStopped=!0,t.call(this)}})}};class o{constructor(e){this.application=e,this.eventListenerMaps=new Map,this.started=!1}start(){this.started||(this.started=!0,this.eventListeners.forEach((e=>e.connect())))}stop(){this.started&&(this.started=!1,this.eventListeners.forEach((e=>e.disconnect())))}get eventListeners(){return Array.from(this.eventListenerMaps.values()).reduce(((e,t)=>e.concat(Array.from(t.values()))),[])}bindingConnected(e){this.fetchEventListenerForBinding(e).bindingConnected(e)}bindingDisconnected(e,t=!1){this.fetchEventListenerForBinding(e).bindingDisconnected(e),t&&this.clearEventListenersForBinding(e)}handleError(e,t,r={}){this.application.handleError(e,`Error ${t}`,r)}clearEventListenersForBinding(e){const t=this.fetchEventListenerForBinding(e);t.hasBindings()||(t.disconnect(),this.removeMappedEventListenerFor(e))}removeMappedEventListenerFor(e){const{eventTarget:t,eventName:r,eventOptions:n}=e,i=this.fetchEventListenerMapForEventTarget(t),s=this.cacheKey(r,n);i.delete(s),0==i.size&&this.eventListenerMaps.delete(t)}fetchEventListenerForBinding(e){const{eventTarget:t,eventName:r,eventOptions:n}=e;return this.fetchEventListener(t,r,n)}fetchEventListener(e,t,r){const n=this.fetchEventListenerMapForEventTarget(e),i=this.cacheKey(t,r);let s=n.get(i);return s||(s=this.createEventListener(e,t,r),n.set(i,s)),s}createEventListener(e,t,r){const n=new s(e,t,r);return this.started&&n.connect(),n}fetchEventListenerMapForEventTarget(e){let t=this.eventListenerMaps.get(e);return t||(t=new Map,this.eventListenerMaps.set(e,t)),t}cacheKey(e,t){const r=[e];return Object.keys(t).sort().forEach((e=>{r.push(`${t[e]?"":"!"}${e}`)})),r.join(":")}}const l={stop:({event:e,value:t})=>(t&&e.stopPropagation(),!0),prevent:({event:e,value:t})=>(t&&e.preventDefault(),!0),self:({event:e,value:t,element:r})=>!t||r===e.target},c=t({},(e(l),l)),h=/^(?:(?:([^.]+?)\+)?(.+?)(?:\.(.+?))?(?:@(window|document))?->)?(.+?)(?:#([^:]+?))(?::(.+))?$/;var d=e=>"window"==e?window:"document"==e?document:void 0,u=e=>e.split(":").reduce(((e,t)=>Object.assign(e,{[t.replace(/^!/,"")]:!/^!/.test(t)})),{});function m(e){return e.replace(/(?:[_-])([a-z0-9])/g,((e,t)=>t.toUpperCase()))}function g(e){return m(e.replace(/--/g,"-").replace(/__/g,"_"))}function p(e){return e.charAt(0).toUpperCase()+e.slice(1)}function f(e){return e.replace(/([A-Z])/g,((e,t)=>`-${t.toLowerCase()}`))}function b(e){return null!=e}function v(e,t){return Object.prototype.hasOwnProperty.call(e,t)}const y=["meta","ctrl","alt","shift"];class O{constructor(e,t,r,n){this.element=e,this.index=t,this.eventTarget=r.eventTarget||e,this.eventName=r.eventName||A(e)||M("missing event name"),this.eventOptions=r.eventOptions||{},this.identifier=r.identifier||M("missing identifier"),this.methodName=r.methodName||M("missing method name"),this.keyFilter=r.keyFilter||"",this.schema=n}static forToken(e,t){return new this(e.element,e.index,(e=>{const t=e.trim().match(h)||[];let r=t[2],n=t[3];return n&&!["keydown","keyup","keypress"].includes(r)&&(r+=`.${n}`,n=""),{eventTarget:d(t[4]),eventName:r,eventOptions:t[7]?u(t[7]):{},identifier:t[5],methodName:t[6],keyFilter:t[1]||n}})(e.content),t)}toString(){const e=this.keyFilter?`.${this.keyFilter}`:"",t=this.eventTargetName?`@${this.eventTargetName}`:"";return`${this.eventName}${e}${t}->${this.identifier}#${this.methodName}`}shouldIgnoreKeyboardEvent(e){if(!this.keyFilter)return!1;const t=this.keyFilter.split("+");if(this.keyFilterDissatisfied(e,t))return!0;const r=t.filter((e=>!y.includes(e)))[0];return!!r&&(v(this.keyMappings,r)||M(`contains unknown key filter: ${this.keyFilter}`),this.keyMappings[r].toLowerCase()!==e.key.toLowerCase())}shouldIgnoreMouseEvent(e){if(!this.keyFilter)return!1;const t=[this.keyFilter];return!!this.keyFilterDissatisfied(e,t)}get params(){const e={},t=new RegExp(`^data-${this.identifier}-(.+)-param$`,"i");for(const{name:r,value:n}of Array.from(this.element.attributes)){const i=r.match(t),s=i&&i[1];s&&(e[m(s)]=C(n))}return e}get eventTargetName(){return(e=this.eventTarget)==window?"window":e==document?"document":void 0;var e}get keyMappings(){return this.schema.keyMappings}keyFilterDissatisfied(e,t){const[r,n,i,s]=y.map((e=>t.includes(e)));return e.metaKey!==r||e.ctrlKey!==n||e.altKey!==i||e.shiftKey!==s}}const S={a:()=>"click",button:()=>"click",form:()=>"submit",details:()=>"toggle",input:e=>"submit"==e.getAttribute("type")?"click":"input",select:()=>"change",textarea:()=>"input"};var A=e=>{const t=e.tagName.toLowerCase();if(t in S)return S[t](e)};function M(e){throw new Error(e)}var C=e=>{try{return JSON.parse(e)}catch(t){return e}};class k{constructor(e,t){this.context=e,this.action=t}get index(){return this.action.index}get eventTarget(){return this.action.eventTarget}get eventOptions(){return this.action.eventOptions}get identifier(){return this.context.identifier}handleEvent(e){const t=this.prepareActionEvent(e);this.willBeInvokedByEvent(e)&&this.applyEventModifiers(t)&&this.invokeWithEvent(t)}get eventName(){return this.action.eventName}get method(){const e=this.controller[this.methodName];if("function"==typeof e)return e;throw new Error(`Action "${this.action}" references undefined method "${this.methodName}"`)}applyEventModifiers(e){const{element:t}=this.action,{actionDescriptorFilters:r}=this.context.application,{controller:n}=this.context;let i=!0;for(const[s,a]of Object.entries(this.eventOptions))if(s in r){const o=r[s];i=i&&o({name:s,value:a,event:e,element:t,controller:n})}return i}prepareActionEvent(e){return Object.assign(e,{params:this.action.params})}invokeWithEvent(e){const{target:t,currentTarget:r}=e;try{this.method.call(this.controller,e),this.context.logDebugActivity(this.methodName,{event:e,target:t,currentTarget:r,action:this.methodName})}catch(t){const{identifier:r,controller:n,element:i,index:s}=this,a={identifier:r,controller:n,element:i,index:s,event:e};this.context.handleError(t,`invoking action "${this.action}"`,a)}}willBeInvokedByEvent(e){const t=e.target;return!(e instanceof KeyboardEvent&&this.action.shouldIgnoreKeyboardEvent(e))&&!(e instanceof MouseEvent&&this.action.shouldIgnoreMouseEvent(e))&&(this.element===t||(t instanceof Element&&this.element.contains(t)?this.scope.containsElement(t):this.scope.containsElement(this.action.element)))}get controller(){return this.context.controller}get methodName(){return this.action.methodName}get element(){return this.scope.element}get scope(){return this.context.scope}}class w{constructor(e,t){this.mutationObserverInit={attributes:!0,childList:!0,subtree:!0},this.element=e,this.started=!1,this.delegate=t,this.elements=new Set,this.mutationObserver=new MutationObserver((e=>this.processMutations(e)))}start(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,this.mutationObserverInit),this.refresh())}pause(e){this.started&&(this.mutationObserver.disconnect(),this.started=!1),e(),this.started||(this.mutationObserver.observe(this.element,this.mutationObserverInit),this.started=!0)}stop(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)}refresh(){if(this.started){const e=new Set(this.matchElementsInTree());for(const t of Array.from(this.elements))e.has(t)||this.removeElement(t);for(const t of Array.from(e))this.addElement(t)}}processMutations(e){if(this.started)for(const t of e)this.processMutation(t)}processMutation(e){"attributes"==e.type?this.processAttributeChange(e.target,e.attributeName):"childList"==e.type&&(this.processRemovedNodes(e.removedNodes),this.processAddedNodes(e.addedNodes))}processAttributeChange(e,t){this.elements.has(e)?this.delegate.elementAttributeChanged&&this.matchElement(e)?this.delegate.elementAttributeChanged(e,t):this.removeElement(e):this.matchElement(e)&&this.addElement(e)}processRemovedNodes(e){for(const t of Array.from(e)){const e=this.elementFromNode(t);e&&this.processTree(e,this.removeElement)}}processAddedNodes(e){for(const t of Array.from(e)){const e=this.elementFromNode(t);e&&this.elementIsActive(e)&&this.processTree(e,this.addElement)}}matchElement(e){return this.delegate.matchElement(e)}matchElementsInTree(e=this.element){return this.delegate.matchElementsInTree(e)}processTree(e,t){for(const r of this.matchElementsInTree(e))t.call(this,r)}elementFromNode(e){if(e.nodeType==Node.ELEMENT_NODE)return e}elementIsActive(e){return e.isConnected==this.element.isConnected&&this.element.contains(e)}addElement(e){this.elements.has(e)||this.elementIsActive(e)&&(this.elements.add(e),this.delegate.elementMatched&&this.delegate.elementMatched(e))}removeElement(e){this.elements.has(e)&&(this.elements.delete(e),this.delegate.elementUnmatched&&this.delegate.elementUnmatched(e))}}class E{constructor(e,t,r){this.attributeName=t,this.delegate=r,this.elementObserver=new w(e,this)}get element(){return this.elementObserver.element}get selector(){return`[${this.attributeName}]`}start(){this.elementObserver.start()}pause(e){this.elementObserver.pause(e)}stop(){this.elementObserver.stop()}refresh(){this.elementObserver.refresh()}get started(){return this.elementObserver.started}matchElement(e){return e.hasAttribute(this.attributeName)}matchElementsInTree(e){const t=this.matchElement(e)?[e]:[],r=Array.from(e.querySelectorAll(this.selector));return t.concat(r)}elementMatched(e){this.delegate.elementMatchedAttribute&&this.delegate.elementMatchedAttribute(e,this.attributeName)}elementUnmatched(e){this.delegate.elementUnmatchedAttribute&&this.delegate.elementUnmatchedAttribute(e,this.attributeName)}elementAttributeChanged(e,t){this.delegate.elementAttributeValueChanged&&this.attributeName==t&&this.delegate.elementAttributeValueChanged(e,t)}}function F(e,t){let r=e.get(t);return r||(r=new Set,e.set(t,r)),r}class B{constructor(){this.valuesByKey=new Map}get keys(){return Array.from(this.valuesByKey.keys())}get values(){return Array.from(this.valuesByKey.values()).reduce(((e,t)=>e.concat(Array.from(t))),[])}get size(){return Array.from(this.valuesByKey.values()).reduce(((e,t)=>e+t.size),0)}add(e,t){!function(e,t,r){F(e,t).add(r)}(this.valuesByKey,e,t)}delete(e,t){!function(e,t,r){F(e,t).delete(r),((e,t)=>{const r=e.get(t);null!=r&&0==r.size&&e.delete(t)})(e,t)}(this.valuesByKey,e,t)}has(e,t){const r=this.valuesByKey.get(e);return null!=r&&r.has(t)}hasKey(e){return this.valuesByKey.has(e)}hasValue(e){return Array.from(this.valuesByKey.values()).some((t=>t.has(e)))}getValuesForKey(e){const t=this.valuesByKey.get(e);return t?Array.from(t):[]}getKeysForValue(e){return Array.from(this.valuesByKey).filter((([t,r])=>r.has(e))).map((([e,t])=>e))}}class T{constructor(e,t,r,n){this._selector=t,this.details=n,this.elementObserver=new w(e,this),this.delegate=r,this.matchesByElement=new B}get started(){return this.elementObserver.started}get selector(){return this._selector}set selector(e){this._selector=e,this.refresh()}start(){this.elementObserver.start()}pause(e){this.elementObserver.pause(e)}stop(){this.elementObserver.stop()}refresh(){this.elementObserver.refresh()}get element(){return this.elementObserver.element}matchElement(e){const{selector:t}=this;if(t){const r=e.matches(t);return this.delegate.selectorMatchElement?r&&this.delegate.selectorMatchElement(e,this.details):r}return!1}matchElementsInTree(e){const{selector:t}=this;if(t){const r=this.matchElement(e)?[e]:[],n=Array.from(e.querySelectorAll(t)).filter((e=>this.matchElement(e)));return r.concat(n)}return[]}elementMatched(e){const{selector:t}=this;t&&this.selectorMatched(e,t)}elementUnmatched(e){const t=this.matchesByElement.getKeysForValue(e);for(const r of t)this.selectorUnmatched(e,r)}elementAttributeChanged(e,t){const{selector:r}=this;if(r){const t=this.matchElement(e),n=this.matchesByElement.has(r,e);t&&!n?this.selectorMatched(e,r):!t&&n&&this.selectorUnmatched(e,r)}}selectorMatched(e,t){this.delegate.selectorMatched(e,t,this.details),this.matchesByElement.add(t,e)}selectorUnmatched(e,t){this.delegate.selectorUnmatched(e,t,this.details),this.matchesByElement.delete(t,e)}}class N{constructor(e,t){this.element=e,this.delegate=t,this.started=!1,this.stringMap=new Map,this.mutationObserver=new MutationObserver((e=>this.processMutations(e)))}start(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,{attributes:!0,attributeOldValue:!0}),this.refresh())}stop(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)}refresh(){if(this.started)for(const e of this.knownAttributeNames)this.refreshAttribute(e,null)}processMutations(e){if(this.started)for(const t of e)this.processMutation(t)}processMutation(e){const t=e.attributeName;t&&this.refreshAttribute(t,e.oldValue)}refreshAttribute(e,t){const r=this.delegate.getStringMapKeyForAttribute(e);if(null!=r){this.stringMap.has(e)||this.stringMapKeyAdded(r,e);const n=this.element.getAttribute(e);if(this.stringMap.get(e)!=n&&this.stringMapValueChanged(n,r,t),null==n){const t=this.stringMap.get(e);this.stringMap.delete(e),t&&this.stringMapKeyRemoved(r,e,t)}else this.stringMap.set(e,n)}}stringMapKeyAdded(e,t){this.delegate.stringMapKeyAdded&&this.delegate.stringMapKeyAdded(e,t)}stringMapValueChanged(e,t,r){this.delegate.stringMapValueChanged&&this.delegate.stringMapValueChanged(e,t,r)}stringMapKeyRemoved(e,t,r){this.delegate.stringMapKeyRemoved&&this.delegate.stringMapKeyRemoved(e,t,r)}get knownAttributeNames(){return Array.from(new Set(this.currentAttributeNames.concat(this.recordedAttributeNames)))}get currentAttributeNames(){return Array.from(this.element.attributes).map((e=>e.name))}get recordedAttributeNames(){return Array.from(this.stringMap.keys())}}class L{constructor(e,t,r){this.attributeObserver=new E(e,t,this),this.delegate=r,this.tokensByElement=new B}get started(){return this.attributeObserver.started}start(){this.attributeObserver.start()}pause(e){this.attributeObserver.pause(e)}stop(){this.attributeObserver.stop()}refresh(){this.attributeObserver.refresh()}get element(){return this.attributeObserver.element}get attributeName(){return this.attributeObserver.attributeName}elementMatchedAttribute(e){this.tokensMatched(this.readTokensForElement(e))}elementAttributeValueChanged(e){const[t,r]=this.refreshTokensForElement(e);this.tokensUnmatched(t),this.tokensMatched(r)}elementUnmatchedAttribute(e){this.tokensUnmatched(this.tokensByElement.getValuesForKey(e))}tokensMatched(e){e.forEach((e=>this.tokenMatched(e)))}tokensUnmatched(e){e.forEach((e=>this.tokenUnmatched(e)))}tokenMatched(e){this.delegate.tokenMatched(e),this.tokensByElement.add(e.element,e)}tokenUnmatched(e){this.delegate.tokenUnmatched(e),this.tokensByElement.delete(e.element,e)}refreshTokensForElement(e){const t=this.tokensByElement.getValuesForKey(e),r=this.readTokensForElement(e),n=I(t,r).findIndex((([e,t])=>!x(e,t)));return-1==n?[[],[]]:[t.slice(n),r.slice(n)]}readTokensForElement(e){const t=this.attributeName,r=e.getAttribute(t)||"";return P(r,e,t)}}var P=(e,t,r)=>e.trim().split(/\s+/).filter((e=>e.length)).map(((e,n)=>({element:t,attributeName:r,content:e,index:n}))),I=(e,t)=>{const r=Math.max(e.length,t.length);return Array.from({length:r},((r,n)=>[e[n],t[n]]))},x=(e,t)=>e&&t&&e.index==t.index&&e.content==t.content;class ${constructor(e,t,r){this.tokenListObserver=new L(e,t,this),this.delegate=r,this.parseResultsByToken=new WeakMap,this.valuesByTokenByElement=new WeakMap}get started(){return this.tokenListObserver.started}start(){this.tokenListObserver.start()}stop(){this.tokenListObserver.stop()}refresh(){this.tokenListObserver.refresh()}get element(){return this.tokenListObserver.element}get attributeName(){return this.tokenListObserver.attributeName}tokenMatched(e){const{element:t}=e,{value:r}=this.fetchParseResultForToken(e);r&&(this.fetchValuesByTokenForElement(t).set(e,r),this.delegate.elementMatchedValue(t,r))}tokenUnmatched(e){const{element:t}=e,{value:r}=this.fetchParseResultForToken(e);r&&(this.fetchValuesByTokenForElement(t).delete(e),this.delegate.elementUnmatchedValue(t,r))}fetchParseResultForToken(e){let t=this.parseResultsByToken.get(e);return t||(t=this.parseToken(e),this.parseResultsByToken.set(e,t)),t}fetchValuesByTokenForElement(e){let t=this.valuesByTokenByElement.get(e);return t||(t=new Map,this.valuesByTokenByElement.set(e,t)),t}parseToken(e){try{return{value:this.delegate.parseValueForToken(e)}}catch(e){return{error:e}}}}class D{constructor(e,t){this.context=e,this.delegate=t,this.bindingsByAction=new Map}start(){this.valueListObserver||(this.valueListObserver=new $(this.element,this.actionAttribute,this),this.valueListObserver.start())}stop(){this.valueListObserver&&(this.valueListObserver.stop(),delete this.valueListObserver,this.disconnectAllActions())}get element(){return this.context.element}get identifier(){return this.context.identifier}get actionAttribute(){return this.schema.actionAttribute}get schema(){return this.context.schema}get bindings(){return Array.from(this.bindingsByAction.values())}connectAction(e){const t=new k(this.context,e);this.bindingsByAction.set(e,t),this.delegate.bindingConnected(t)}disconnectAction(e){const t=this.bindingsByAction.get(e);t&&(this.bindingsByAction.delete(e),this.delegate.bindingDisconnected(t))}disconnectAllActions(){this.bindings.forEach((e=>this.delegate.bindingDisconnected(e,!0))),this.bindingsByAction.clear()}parseValueForToken(e){const t=O.forToken(e,this.schema);if(t.identifier==this.identifier)return t}elementMatchedValue(e,t){this.connectAction(t)}elementUnmatchedValue(e,t){this.disconnectAction(t)}}class R{constructor(e,t){this.context=e,this.receiver=t,this.stringMapObserver=new N(this.element,this),this.valueDescriptorMap=this.controller.valueDescriptorMap}start(){this.stringMapObserver.start(),this.invokeChangedCallbacksForDefaultValues()}stop(){this.stringMapObserver.stop()}get element(){return this.context.element}get controller(){return this.context.controller}getStringMapKeyForAttribute(e){if(e in this.valueDescriptorMap)return this.valueDescriptorMap[e].name}stringMapKeyAdded(e,t){const r=this.valueDescriptorMap[t];this.hasValue(e)||this.invokeChangedCallback(e,r.writer(this.receiver[e]),r.writer(r.defaultValue))}stringMapValueChanged(e,t,r){const n=this.valueDescriptorNameMap[t];null!==e&&(null===r&&(r=n.writer(n.defaultValue)),this.invokeChangedCallback(t,e,r))}stringMapKeyRemoved(e,t,r){const n=this.valueDescriptorNameMap[e];this.hasValue(e)?this.invokeChangedCallback(e,n.writer(this.receiver[e]),r):this.invokeChangedCallback(e,n.writer(n.defaultValue),r)}invokeChangedCallbacksForDefaultValues(){for(const{key:e,name:t,defaultValue:r,writer:n}of this.valueDescriptors)null==r||this.controller.data.has(e)||this.invokeChangedCallback(t,n(r),void 0)}invokeChangedCallback(e,t,r){const n=`${e}Changed`,i=this.receiver[n];if("function"==typeof i){const n=this.valueDescriptorNameMap[e];try{const e=n.reader(t);let s=r;r&&(s=n.reader(r)),i.call(this.receiver,e,s)}catch(e){throw e instanceof TypeError&&(e.message=`Stimulus Value "${this.context.identifier}.${n.name}" - ${e.message}`),e}}}get valueDescriptors(){const{valueDescriptorMap:e}=this;return Object.keys(e).map((t=>e[t]))}get valueDescriptorNameMap(){const e={};return Object.keys(this.valueDescriptorMap).forEach((t=>{const r=this.valueDescriptorMap[t];e[r.name]=r})),e}hasValue(e){const t=`has${p(this.valueDescriptorNameMap[e].name)}`;return this.receiver[t]}}class j{constructor(e,t){this.context=e,this.delegate=t,this.targetsByName=new B}start(){this.tokenListObserver||(this.tokenListObserver=new L(this.element,this.attributeName,this),this.tokenListObserver.start())}stop(){this.tokenListObserver&&(this.disconnectAllTargets(),this.tokenListObserver.stop(),delete this.tokenListObserver)}tokenMatched({element:e,content:t}){this.scope.containsElement(e)&&this.connectTarget(e,t)}tokenUnmatched({element:e,content:t}){this.disconnectTarget(e,t)}connectTarget(e,t){var r;this.targetsByName.has(t,e)||(this.targetsByName.add(t,e),null===(r=this.tokenListObserver)||void 0===r||r.pause((()=>this.delegate.targetConnected(e,t))))}disconnectTarget(e,t){var r;this.targetsByName.has(t,e)&&(this.targetsByName.delete(t,e),null===(r=this.tokenListObserver)||void 0===r||r.pause((()=>this.delegate.targetDisconnected(e,t))))}disconnectAllTargets(){for(const e of this.targetsByName.keys)for(const t of this.targetsByName.getValuesForKey(e))this.disconnectTarget(t,e)}get attributeName(){return`data-${this.context.identifier}-target`}get element(){return this.context.element}get scope(){return this.context.scope}}function K(e,t){const r=V(e);return Array.from(r.reduce(((e,r)=>(U(r,t).forEach((t=>e.add(t))),e)),new Set))}function V(e){const t=[];for(;e;)t.push(e),e=Object.getPrototypeOf(e);return t.reverse()}var U=(e,t)=>{const r=e[t];return Array.isArray(r)?r:[]};class G{constructor(e,t){this.started=!1,this.context=e,this.delegate=t,this.outletsByName=new B,this.outletElementsByName=new B,this.selectorObserverMap=new Map,this.attributeObserverMap=new Map}start(){this.started||(this.outletDefinitions.forEach((e=>{this.setupSelectorObserverForOutlet(e),this.setupAttributeObserverForOutlet(e)})),this.started=!0,this.dependentContexts.forEach((e=>e.refresh())))}refresh(){this.selectorObserverMap.forEach((e=>e.refresh())),this.attributeObserverMap.forEach((e=>e.refresh()))}stop(){this.started&&(this.started=!1,this.disconnectAllOutlets(),this.stopSelectorObservers(),this.stopAttributeObservers())}stopSelectorObservers(){this.selectorObserverMap.size>0&&(this.selectorObserverMap.forEach((e=>e.stop())),this.selectorObserverMap.clear())}stopAttributeObservers(){this.attributeObserverMap.size>0&&(this.attributeObserverMap.forEach((e=>e.stop())),this.attributeObserverMap.clear())}selectorMatched(e,t,{outletName:r}){const n=this.getOutlet(e,r);n&&this.connectOutlet(n,e,r)}selectorUnmatched(e,t,{outletName:r}){const n=this.getOutletFromMap(e,r);n&&this.disconnectOutlet(n,e,r)}selectorMatchElement(e,{outletName:t}){const r=this.selector(t),n=this.hasOutlet(e,t),i=e.matches(`[${this.schema.controllerAttribute}~=${t}]`);return!!r&&n&&i&&e.matches(r)}elementMatchedAttribute(e,t){const r=this.getOutletNameFromOutletAttributeName(t);r&&this.updateSelectorObserverForOutlet(r)}elementAttributeValueChanged(e,t){const r=this.getOutletNameFromOutletAttributeName(t);r&&this.updateSelectorObserverForOutlet(r)}elementUnmatchedAttribute(e,t){const r=this.getOutletNameFromOutletAttributeName(t);r&&this.updateSelectorObserverForOutlet(r)}connectOutlet(e,t,r){var n;this.outletElementsByName.has(r,t)||(this.outletsByName.add(r,e),this.outletElementsByName.add(r,t),null===(n=this.selectorObserverMap.get(r))||void 0===n||n.pause((()=>this.delegate.outletConnected(e,t,r))))}disconnectOutlet(e,t,r){var n;this.outletElementsByName.has(r,t)&&(this.outletsByName.delete(r,e),this.outletElementsByName.delete(r,t),null===(n=this.selectorObserverMap.get(r))||void 0===n||n.pause((()=>this.delegate.outletDisconnected(e,t,r))))}disconnectAllOutlets(){for(const e of this.outletElementsByName.keys)for(const t of this.outletElementsByName.getValuesForKey(e))for(const r of this.outletsByName.getValuesForKey(e))this.disconnectOutlet(r,t,e)}updateSelectorObserverForOutlet(e){const t=this.selectorObserverMap.get(e);t&&(t.selector=this.selector(e))}setupSelectorObserverForOutlet(e){const t=this.selector(e),r=new T(document.body,t,this,{outletName:e});this.selectorObserverMap.set(e,r),r.start()}setupAttributeObserverForOutlet(e){const t=this.attributeNameForOutletName(e),r=new E(this.scope.element,t,this);this.attributeObserverMap.set(e,r),r.start()}selector(e){return this.scope.outlets.getSelectorForOutletName(e)}attributeNameForOutletName(e){return this.scope.schema.outletAttributeForScope(this.identifier,e)}getOutletNameFromOutletAttributeName(e){return this.outletDefinitions.find((t=>this.attributeNameForOutletName(t)===e))}get outletDependencies(){const e=new B;return this.router.modules.forEach((t=>{K(t.definition.controllerConstructor,"outlets").forEach((r=>e.add(r,t.identifier)))})),e}get outletDefinitions(){return this.outletDependencies.getKeysForValue(this.identifier)}get dependentControllerIdentifiers(){return this.outletDependencies.getValuesForKey(this.identifier)}get dependentContexts(){const e=this.dependentControllerIdentifiers;return this.router.contexts.filter((t=>e.includes(t.identifier)))}hasOutlet(e,t){return!!this.getOutlet(e,t)||!!this.getOutletFromMap(e,t)}getOutlet(e,t){return this.application.getControllerForElementAndIdentifier(e,t)}getOutletFromMap(e,t){return this.outletsByName.getValuesForKey(t).find((t=>t.element===e))}get scope(){return this.context.scope}get schema(){return this.context.schema}get identifier(){return this.context.identifier}get application(){return this.context.application}get router(){return this.application.router}}class H{constructor(e,t){this.logDebugActivity=(e,t={})=>{const{identifier:r,controller:n,element:i}=this;t=Object.assign({identifier:r,controller:n,element:i},t),this.application.logDebugActivity(this.identifier,e,t)},this.module=e,this.scope=t,this.controller=new e.controllerConstructor(this),this.bindingObserver=new D(this,this.dispatcher),this.valueObserver=new R(this,this.controller),this.targetObserver=new j(this,this),this.outletObserver=new G(this,this);try{this.controller.initialize(),this.logDebugActivity("initialize")}catch(e){this.handleError(e,"initializing controller")}}connect(){this.bindingObserver.start(),this.valueObserver.start(),this.targetObserver.start(),this.outletObserver.start();try{this.controller.connect(),this.logDebugActivity("connect")}catch(e){this.handleError(e,"connecting controller")}}refresh(){this.outletObserver.refresh()}disconnect(){try{this.controller.disconnect(),this.logDebugActivity("disconnect")}catch(e){this.handleError(e,"disconnecting controller")}this.outletObserver.stop(),this.targetObserver.stop(),this.valueObserver.stop(),this.bindingObserver.stop()}get application(){return this.module.application}get identifier(){return this.module.identifier}get schema(){return this.application.schema}get dispatcher(){return this.application.dispatcher}get element(){return this.scope.element}get parentElement(){return this.element.parentElement}handleError(e,t,r={}){const{identifier:n,controller:i,element:s}=this;r=Object.assign({identifier:n,controller:i,element:s},r),this.application.handleError(e,`Error ${t}`,r)}targetConnected(e,t){this.invokeControllerMethod(`${t}TargetConnected`,e)}targetDisconnected(e,t){this.invokeControllerMethod(`${t}TargetDisconnected`,e)}outletConnected(e,t,r){this.invokeControllerMethod(`${g(r)}OutletConnected`,e,t)}outletDisconnected(e,t,r){this.invokeControllerMethod(`${g(r)}OutletDisconnected`,e,t)}invokeControllerMethod(e,...t){const r=this.controller;"function"==typeof r[e]&&r[e](...t)}}var z=(e,t)=>{const r=_(e),n=J(e.prototype,t);return Object.defineProperties(r.prototype,n),r},q=e=>K(e,"blessings").reduce(((t,r)=>{const n=r(e);for(const e in n){const r=t[e]||{};t[e]=Object.assign(r,n[e])}return t}),{}),J=(e,t)=>Y(t).reduce(((r,n)=>{const i=W(e,t,n);return i&&Object.assign(r,{[n]:i}),r}),{}),W=(e,t,r)=>{const n=Object.getOwnPropertyDescriptor(e,r);if(!n||!("value"in n)){const e=Object.getOwnPropertyDescriptor(t,r).value;return n&&(e.get=n.get||e.get,e.set=n.set||e.set),e}};const Y=e=>[...Object.getOwnPropertyNames(e),...Object.getOwnPropertySymbols(e)],_=(()=>{function e(e){function t(){return Reflect.construct(e,arguments,new.target)}return t.prototype=Object.create(e.prototype,{constructor:{value:t}}),Reflect.setPrototypeOf(t,e),t}try{return(()=>{const t=e((function(){this.a.call(this)}));t.prototype.a=function(){},new t})(),e}catch(e){return e=>class extends e{}}})();class Q{constructor(e,t){this.application=e,this.definition=(e=>{return{identifier:e.identifier,controllerConstructor:(t=e.controllerConstructor,z(t,q(t)))};var t})(t),this.contextsByScope=new WeakMap,this.connectedContexts=new Set}get identifier(){return this.definition.identifier}get controllerConstructor(){return this.definition.controllerConstructor}get contexts(){return Array.from(this.connectedContexts)}connectContextForScope(e){const t=this.fetchContextForScope(e);this.connectedContexts.add(t),t.connect()}disconnectContextForScope(e){const t=this.contextsByScope.get(e);t&&(this.connectedContexts.delete(t),t.disconnect())}fetchContextForScope(e){let t=this.contextsByScope.get(e);return t||(t=new H(this,e),this.contextsByScope.set(e,t)),t}}class Z{constructor(e){this.scope=e}has(e){return this.data.has(this.getDataKey(e))}get(e){return this.getAll(e)[0]}getAll(e){return(this.data.get(this.getDataKey(e))||"").match(/[^\s]+/g)||[]}getAttributeName(e){return this.data.getAttributeNameForKey(this.getDataKey(e))}getDataKey(e){return`${e}-class`}get data(){return this.scope.data}}class X{constructor(e){this.scope=e}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get(e){const t=this.getAttributeNameForKey(e);return this.element.getAttribute(t)}set(e,t){const r=this.getAttributeNameForKey(e);return this.element.setAttribute(r,t),this.get(e)}has(e){const t=this.getAttributeNameForKey(e);return this.element.hasAttribute(t)}delete(e){if(this.has(e)){const t=this.getAttributeNameForKey(e);return this.element.removeAttribute(t),!0}return!1}getAttributeNameForKey(e){return`data-${this.identifier}-${f(e)}`}}class ee{constructor(e){this.warnedKeysByObject=new WeakMap,this.logger=e}warn(e,t,r){let n=this.warnedKeysByObject.get(e);n||(n=new Set,this.warnedKeysByObject.set(e,n)),n.has(t)||(n.add(t),this.logger.warn(r,e))}}function te(e,t){return`[${e}~="${t}"]`}class re{constructor(e){this.scope=e}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get schema(){return this.scope.schema}has(e){return null!=this.find(e)}find(...e){return e.reduce(((e,t)=>e||this.findTarget(t)||this.findLegacyTarget(t)),void 0)}findAll(...e){return e.reduce(((e,t)=>[...e,...this.findAllTargets(t),...this.findAllLegacyTargets(t)]),[])}findTarget(e){const t=this.getSelectorForTargetName(e);return this.scope.findElement(t)}findAllTargets(e){const t=this.getSelectorForTargetName(e);return this.scope.findAllElements(t)}getSelectorForTargetName(e){return te(this.schema.targetAttributeForScope(this.identifier),e)}findLegacyTarget(e){const t=this.getLegacySelectorForTargetName(e);return this.deprecate(this.scope.findElement(t),e)}findAllLegacyTargets(e){const t=this.getLegacySelectorForTargetName(e);return this.scope.findAllElements(t).map((t=>this.deprecate(t,e)))}getLegacySelectorForTargetName(e){const t=`${this.identifier}.${e}`;return te(this.schema.targetAttribute,t)}deprecate(e,t){if(e){const{identifier:r}=this,n=this.schema.targetAttribute,i=this.schema.targetAttributeForScope(r);this.guide.warn(e,`target:${t}`,`Please replace ${n}="${r}.${t}" with ${i}="${t}". The ${n} attribute is deprecated and will be removed in a future version of Stimulus.`)}return e}get guide(){return this.scope.guide}}class ne{constructor(e,t){this.scope=e,this.controllerElement=t}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get schema(){return this.scope.schema}has(e){return null!=this.find(e)}find(...e){return e.reduce(((e,t)=>e||this.findOutlet(t)),void 0)}findAll(...e){return e.reduce(((e,t)=>[...e,...this.findAllOutlets(t)]),[])}getSelectorForOutletName(e){const t=this.schema.outletAttributeForScope(this.identifier,e);return this.controllerElement.getAttribute(t)}findOutlet(e){const t=this.getSelectorForOutletName(e);if(t)return this.findElement(t,e)}findAllOutlets(e){const t=this.getSelectorForOutletName(e);return t?this.findAllElements(t,e):[]}findElement(e,t){return this.scope.queryElements(e).filter((r=>this.matchesElement(r,e,t)))[0]}findAllElements(e,t){return this.scope.queryElements(e).filter((r=>this.matchesElement(r,e,t)))}matchesElement(e,t,r){const n=e.getAttribute(this.scope.schema.controllerAttribute)||"";return e.matches(t)&&n.split(" ").includes(r)}}class ie{constructor(e,t,r,n){this.targets=new re(this),this.classes=new Z(this),this.data=new X(this),this.containsElement=e=>e.closest(this.controllerSelector)===this.element,this.schema=e,this.element=t,this.identifier=r,this.guide=new ee(n),this.outlets=new ne(this.documentScope,t)}findElement(e){return this.element.matches(e)?this.element:this.queryElements(e).find(this.containsElement)}findAllElements(e){return[...this.element.matches(e)?[this.element]:[],...this.queryElements(e).filter(this.containsElement)]}queryElements(e){return Array.from(this.element.querySelectorAll(e))}get controllerSelector(){return te(this.schema.controllerAttribute,this.identifier)}get isDocumentScope(){return this.element===document.documentElement}get documentScope(){return this.isDocumentScope?this:new ie(this.schema,document.documentElement,this.identifier,this.guide.logger)}}class se{constructor(e,t,r){this.element=e,this.schema=t,this.delegate=r,this.valueListObserver=new $(this.element,this.controllerAttribute,this),this.scopesByIdentifierByElement=new WeakMap,this.scopeReferenceCounts=new WeakMap}start(){this.valueListObserver.start()}stop(){this.valueListObserver.stop()}get controllerAttribute(){return this.schema.controllerAttribute}parseValueForToken(e){const{element:t,content:r}=e;return this.parseValueForElementAndIdentifier(t,r)}parseValueForElementAndIdentifier(e,t){const r=this.fetchScopesByIdentifierForElement(e);let n=r.get(t);return n||(n=this.delegate.createScopeForElementAndIdentifier(e,t),r.set(t,n)),n}elementMatchedValue(e,t){const r=(this.scopeReferenceCounts.get(t)||0)+1;this.scopeReferenceCounts.set(t,r),1==r&&this.delegate.scopeConnected(t)}elementUnmatchedValue(e,t){const r=this.scopeReferenceCounts.get(t);r&&(this.scopeReferenceCounts.set(t,r-1),1==r&&this.delegate.scopeDisconnected(t))}fetchScopesByIdentifierForElement(e){let t=this.scopesByIdentifierByElement.get(e);return t||(t=new Map,this.scopesByIdentifierByElement.set(e,t)),t}}class ae{constructor(e){this.application=e,this.scopeObserver=new se(this.element,this.schema,this),this.scopesByIdentifier=new B,this.modulesByIdentifier=new Map}get element(){return this.application.element}get schema(){return this.application.schema}get logger(){return this.application.logger}get controllerAttribute(){return this.schema.controllerAttribute}get modules(){return Array.from(this.modulesByIdentifier.values())}get contexts(){return this.modules.reduce(((e,t)=>e.concat(t.contexts)),[])}start(){this.scopeObserver.start()}stop(){this.scopeObserver.stop()}loadDefinition(e){this.unloadIdentifier(e.identifier);const t=new Q(this.application,e);this.connectModule(t);const r=e.controllerConstructor.afterLoad;r&&r.call(e.controllerConstructor,e.identifier,this.application)}unloadIdentifier(e){const t=this.modulesByIdentifier.get(e);t&&this.disconnectModule(t)}getContextForElementAndIdentifier(e,t){const r=this.modulesByIdentifier.get(t);if(r)return r.contexts.find((t=>t.element==e))}proposeToConnectScopeForElementAndIdentifier(e,t){const r=this.scopeObserver.parseValueForElementAndIdentifier(e,t);r?this.scopeObserver.elementMatchedValue(r.element,r):console.error(`Couldn't find or create scope for identifier: "${t}" and element:`,e)}handleError(e,t,r){this.application.handleError(e,t,r)}createScopeForElementAndIdentifier(e,t){return new ie(this.schema,e,t,this.logger)}scopeConnected(e){this.scopesByIdentifier.add(e.identifier,e);const t=this.modulesByIdentifier.get(e.identifier);t&&t.connectContextForScope(e)}scopeDisconnected(e){this.scopesByIdentifier.delete(e.identifier,e);const t=this.modulesByIdentifier.get(e.identifier);t&&t.disconnectContextForScope(e)}connectModule(e){this.modulesByIdentifier.set(e.identifier,e),this.scopesByIdentifier.getValuesForKey(e.identifier).forEach((t=>e.connectContextForScope(t)))}disconnectModule(e){this.modulesByIdentifier.delete(e.identifier),this.scopesByIdentifier.getValuesForKey(e.identifier).forEach((t=>e.disconnectContextForScope(t)))}}const oe={controllerAttribute:"data-controller",actionAttribute:"data-action",targetAttribute:"data-target",targetAttributeForScope:e=>`data-${e}-target`,outletAttributeForScope:(e,t)=>`data-${e}-${t}-outlet`,keyMappings:Object.assign(Object.assign({enter:"Enter",tab:"Tab",esc:"Escape",space:" ",up:"ArrowUp",down:"ArrowDown",left:"ArrowLeft",right:"ArrowRight",home:"Home",end:"End",page_up:"PageUp",page_down:"PageDown"},le("abcdefghijklmnopqrstuvwxyz".split("").map((e=>[e,e])))),le("0123456789".split("").map((e=>[e,e]))))};function le(r){return r.reduce(((r,[n,i])=>{let s=t({},(e(r),r));return Object.assign(s,{[n]:i})}),{})}class ce{constructor(e=document.documentElement,t=oe){this.logger=console,this.debug=!1,this.logDebugActivity=(e,t,r={})=>{this.debug&&this.logFormattedMessage(e,t,r)},this.element=e,this.schema=t,this.dispatcher=new o(this),this.router=new ae(this),this.actionDescriptorFilters=c}static start(e,t){const r=new this(e,t);return r.start(),r}async start(){await he(),this.logDebugActivity("application","starting"),this.dispatcher.start(),this.router.start(),this.logDebugActivity("application","start")}stop(){this.logDebugActivity("application","stopping"),this.dispatcher.stop(),this.router.stop(),this.logDebugActivity("application","stop")}register(e,t){this.load({identifier:e,controllerConstructor:t})}registerActionOption(e,t){this.actionDescriptorFilters[e]=t}load(e,...t){(Array.isArray(e)?e:[e,...t]).forEach((e=>{e.controllerConstructor.shouldLoad&&this.router.loadDefinition(e)}))}unload(e,...t){(Array.isArray(e)?e:[e,...t]).forEach((e=>this.router.unloadIdentifier(e)))}get controllers(){return this.router.contexts.map((e=>e.controller))}getControllerForElementAndIdentifier(e,t){const r=this.router.getContextForElementAndIdentifier(e,t);return r?r.controller:null}handleError(e,t,r){var n;this.logger.error("%s\n\n%o\n\n%o",t,e,r),null===(n=window.onerror)||void 0===n||n.call(window,t,"",0,0,e)}logFormattedMessage(e,t,r={}){r=Object.assign({application:this},r),this.logger.groupCollapsed(`${e} #${t}`),this.logger.log("details:",Object.assign({},r)),this.logger.groupEnd()}}var he=()=>new Promise((e=>{"loading"==document.readyState?document.addEventListener("DOMContentLoaded",(()=>e())):e()})),de=e=>({[`${e}Class`]:{get(){const{classes:t}=this;if(t.has(e))return t.get(e);{const r=t.getAttributeName(e);throw new Error(`Missing attribute "${r}"`)}}},[`${e}Classes`]:{get(){return this.classes.getAll(e)}},[`has${p(e)}Class`]:{get(){return this.classes.has(e)}}});function ue(e,t,r){return e.application.getControllerForElementAndIdentifier(t,r)}function me(e,t,r){let n=ue(e,t,r);return n||(e.application.router.proposeToConnectScopeForElementAndIdentifier(t,r),n=ue(e,t,r),n||void 0)}var ge=e=>{const t=g(e);return{[`${t}Outlet`]:{get(){const t=this.outlets.find(e),r=this.outlets.getSelectorForOutletName(e);if(t){const r=me(this,t,e);if(r)return r;throw new Error(`The provided outlet element is missing an outlet controller "${e}" instance for host controller "${this.identifier}"`)}throw new Error(`Missing outlet element "${e}" for host controller "${this.identifier}". Stimulus couldn't find a matching outlet element using selector "${r}".`)}},[`${t}Outlets`]:{get(){const t=this.outlets.findAll(e);return t.length>0?t.map((t=>{const r=me(this,t,e);if(r)return r;console.warn(`The provided outlet element is missing an outlet controller "${e}" instance for host controller "${this.identifier}"`,t)})).filter((e=>e)):[]}},[`${t}OutletElement`]:{get(){const t=this.outlets.find(e),r=this.outlets.getSelectorForOutletName(e);if(t)return t;throw new Error(`Missing outlet element "${e}" for host controller "${this.identifier}". Stimulus couldn't find a matching outlet element using selector "${r}".`)}},[`${t}OutletElements`]:{get(){return this.outlets.findAll(e)}},[`has${p(t)}Outlet`]:{get(){return this.outlets.has(e)}}}},pe=e=>({[`${e}Target`]:{get(){const t=this.targets.find(e);if(t)return t;throw new Error(`Missing target element "${e}" for "${this.identifier}" controller`)}},[`${e}Targets`]:{get(){return this.targets.findAll(e)}},[`has${p(e)}Target`]:{get(){return this.targets.has(e)}}}),fe=(e,t)=>{const r=be(e,t),{key:n,name:i,reader:s,writer:a}=r;return{[i]:{get(){const e=this.data.get(n);return null!==e?s(e):r.defaultValue},set(e){void 0===e?this.data.delete(n):this.data.set(n,a(e))}},[`has${p(i)}`]:{get(){return this.data.has(n)||r.hasCustomDefaultValue}}}};function be([e,t],r){return Oe({controller:r,token:e,typeDefinition:t})}function ve(e){switch(e){case Array:return"array";case Boolean:return"boolean";case Number:return"number";case Object:return"object";case String:return"string"}}function ye(e){switch(typeof e){case"boolean":return"boolean";case"number":return"number";case"string":return"string"}return Array.isArray(e)?"array":"[object Object]"===Object.prototype.toString.call(e)?"object":void 0}var Oe=e=>{const{token:t,typeDefinition:r}=e,n=`${f(t)}-value`,i=(e=>{const{controller:t,token:r,typeDefinition:n}=e,i=(e=>{const{controller:t,token:r,typeObject:n}=e,i=b(n.type),s=b(n.default),a=i&&s,o=i&&!s,l=!i&&s,c=ve(n.type),h=ye(e.typeObject.default);if(o)return c;if(l)return h;if(c!==h)throw new Error(`The specified default value for the Stimulus Value "${t?`${t}.${r}`:r}" must match the defined type "${c}". The provided default value of "${n.default}" is of type "${h}".`);return a?c:void 0})({controller:t,token:r,typeObject:n}),s=ye(n),a=ve(n),o=i||s||a;if(o)return o;throw new Error(`Unknown value type "${t?`${t}.${n}`:r}" for "${r}" value`)})(e);return{type:i,key:n,name:m(n),get defaultValue(){return(e=>{const t=ve(e);if(t)return Se[t];const r=v(e,"default"),n=v(e,"type"),i=e;if(r)return i.default;if(n){const{type:e}=i,t=ve(e);if(t)return Se[t]}return e})(r)},get hasCustomDefaultValue(){return void 0!==ye(r)},reader:Ae[i],writer:Me[i]||Me.default}};const Se={get array(){return[]},boolean:!1,number:0,get object(){return{}},string:""},Ae={array(e){const t=JSON.parse(e);if(!Array.isArray(t))throw new TypeError(`expected value of type "array" but instead got value "${e}" of type "${ye(t)}"`);return t},boolean:e=>!("0"==e||"false"==String(e).toLowerCase()),number:e=>Number(e.replace(/_/g,"")),object(e){const t=JSON.parse(e);if(null===t||"object"!=typeof t||Array.isArray(t))throw new TypeError(`expected value of type "object" but instead got value "${e}" of type "${ye(t)}"`);return t},string:e=>e},Me={default:function(e){return`${e}`},array:Ce,object:Ce};function Ce(e){return JSON.stringify(e)}class ke{constructor(e){this.context=e}static get shouldLoad(){return!0}static afterLoad(e,t){}get application(){return this.context.application}get scope(){return this.context.scope}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get targets(){return this.scope.targets}get outlets(){return this.scope.outlets}get classes(){return this.scope.classes}get data(){return this.scope.data}initialize(){}connect(){}disconnect(){}dispatch(e,{target:t=this.element,detail:r={},prefix:n=this.identifier,bubbles:i=!0,cancelable:s=!0}={}){const a=new CustomEvent(n?`${n}:${e}`:e,{detail:r,bubbles:i,cancelable:s});return t.dispatchEvent(a),a}}ke.blessings=[function(e){return K(e,"classes").reduce(((e,t)=>Object.assign(e,de(t))),{})},function(e){return K(e,"targets").reduce(((e,t)=>Object.assign(e,pe(t))),{})},function(e){const t=((e,t)=>V(e).reduce(((e,t)=>(e.push(...((e,t)=>{const r=e.values;return r?Object.keys(r).map((e=>[e,r[e]])):[]})(t)),e)),[]))(e),r={valueDescriptorMap:{get(){return t.reduce(((e,t)=>{const r=be(t,this.identifier),n=this.data.getAttributeNameForKey(r.key);return Object.assign(e,{[n]:r})}),{})}}};return t.reduce(((e,t)=>Object.assign(e,fe(t))),r)},function(e){return K(e,"outlets").reduce(((e,t)=>Object.assign(e,ge(t))),{})}],ke.targets=[],ke.outlets=[],ke.values={}},393:(e,t,r)=>{r.r(t),r.d(t,{default:()=>s});var n=r(689),i=r(886);const s=class extends n.xI{initialize(){this.fonts=(()=>{const e=i.A.getRandomFont("body"),t=i.A.getRandomFont("code");let r=e;for(;r===e;)r=i.A.getRandomFont("body");return{body:e,code:t,header:r}})(),this.injectFont(this.fonts.body),this.injectFont(this.fonts.code),this.injectFont(this.fonts.header),this.setPageFonts()}injectFont(e){const t=i.A.elementForFont(e);this.element.parentNode.insertBefore(t,this.element)}setPageFonts(){const e=`\n      body {\n        font-family: ${this.fonts.body};\n      }\n      code {\n        font-family: ${this.fonts.code};\n      }\n      .story h1,\n      .story h2,\n      .story h3,\n      .story h4,\n      .story h5,\n      .story h6 {\n        font-family: ${this.fonts.header};\n      }\n    `;this.element.innerHTML=e}}},714:(e,t,r)=>{var n;r.r(t),r.d(t,{default:()=>o});var i=r(689),s=r(886),a=r(725);const o=((n=class extends i.xI{initialize(){this.setRandomByline(),this.setRandomTitleFonts(),this.setRandomEmojis(new Array(0))}setRandomByline(){const e=this.authorNamesValue.first[a.A.randomInt(0,this.authorNamesValue.first.length-1)],t=this.authorNamesValue.last[a.A.randomInt(0,this.authorNamesValue.last.length-1)];this.bylineTarget.innerText=`${e} ${t}`}setRandomTitleFonts(){const e=this.titleTarget.dataset.title.split("");let t=[],r="";e.forEach((e=>{const n=s.A.getRandomFont("nameplate");t.push(s.A.elementForFont(n,e));const i=document.createElement("span");i.style=`font-family: ${n};`,i.innerHTML=e,r+=i.outerHTML})),t.forEach((e=>{document.head.appendChild(e)})),this.titleTarget.innerHTML=r}setRandomEmojis(e){const t=e.length>0?e:this.defaultEmojisValue,r=t[a.A.randomInt(0,t.length-1)],n=t[a.A.randomInt(0,t.length-1)];this.emojiLeftTarget.innerText=`${r}`,this.emojiRightTarget.innerText=`${n}`}paletteWasUpdated({detail:{palette:e}}){this.setRandomEmojis(e.emojis)}}).targets=["byline","title","emojiLeft","emojiRight"],n.values={authorNames:Object,defaultEmojis:Array},n)},726:(e,t,r)=>{var n;r.r(t),r.d(t,{default:()=>s});var i=r(689);const s=((n=class extends i.xI{initialize(){const e=`.${this.storyContentClass} img`;document.querySelectorAll(e).forEach((e=>{e.addEventListener("click",(e=>{const t=document.createElement("img");t.src=e.target.src,t.alt=e.target.alt,this.overlayTarget.appendChild(t),this.overlayTarget.classList.remove(this.hiddenClass)}))}))}hideOverlay(){this.overlayTarget.innerHTML="",this.overlayTarget.classList.add(this.hiddenClass)}setMetaThemeColor(){const e=document.querySelector("meta[name='theme-color']"),t=getComputedStyle(e);e.setAttribute("content",t.color)}pickerWasToggled({detail:{isOpen:e}}){e?this.selfTarget.classList.add(this.disabledClass,this.defocusedClass):this.selfTarget.classList.remove(this.disabledClass,this.defocusedClass)}paletteWasUpdated({detail:{palette:e}}){const t=document.querySelector("html");t.className="",t.classList.add(`palette-${e.id}`),this.setMetaThemeColor()}}).classes=["defocused","disabled","hidden","storyContent"],n.targets=["overlay","self"],n)},20:(e,t,r)=>{var n;r.r(t),r.d(t,{default:()=>a});var i=r(689);const s=class{setItem(e,t){let r=t;"Object"===t.constructor.name&&(r=JSON.stringify(t)),localStorage.setItem(e,r)}getItem(e){let t=localStorage.getItem(e);try{t=JSON.parse(t)}catch(e){}return t||null}},a=((n=class extends i.xI{initialize(){this.storage=new s;const e=this.storage.getItem("palette"),t=this.defaultPaletteValue;this.setPalette(e||t)}setPalette(e){this.storage.setItem("palette",e),document.querySelectorAll(".picker-item").forEach((e=>{e.classList.remove("picker-item-selected")})),document.querySelector(`#picker-item-${e.id}`).classList.add("picker-item-selected"),this.dispatch("paletteUpdated",{detail:{palette:e}})}paletteSelected(e){const t=JSON.parse(e.currentTarget.dataset.palette);this.setPalette(t)}openMenu(){this.isOpenValue=!0,this.menuTarget.classList.remove(this.hiddenClass)}closeMenu(){this.isOpenValue=!1,this.menuTarget.classList.add(this.hiddenClass)}toggleMenu(){this.isOpenValue?this.closeMenu():this.openMenu(),this.dispatch("toggled",{detail:{isOpen:this.isOpenValue}})}closeIfNeeded(e){!this.element.contains(e.target)&&this.isOpenValue&&this.toggleMenu()}}).classes=["hidden"],n.targets=["menu"],n.values={isOpen:Boolean,defaultPalette:Object},n)},886:(e,t,r)=>{r.d(t,{A:()=>s});var n=r(725);const i={body:["Roboto","Open Sans","Lato","Montserrat","Quattrocento","Muli","Playfair Display","Crimson Text","Bitter","Josefin Sans","Arvo","Varela Round","Source Serif Pro","Questrial","Tinos","Monda","Nanum Myeongjo","Sanchez","Frank Ruhl Libre","Prata","Glegoo","IBM Plex Sans","Kreon","Alice","Antic Slab","Anaheim","Ovo","Biryani"],code:["Roboto Mono","Source Code Pro","Anonymous Pro","Cutive Mono","Overpass Mono","Nova Mono"],nameplate:["Roboto","Charm","ZCOOL XiaoWei","Open Sans","Lato","Montserrat","Thasadith","Roboto Condensed","Oswald","Aleo","Source Sans Pro","Raleway","PT Sans","Merriweather","Sarabun","Slabo 27px","Roboto Slab","Noto Sans","Poppins","Ubuntu","Major Mono Display","Open Sans Condensed","Roboto Mono","Playfair Display","PT Serif","Lora","Muli","Staatliches","Mukta","PT Sans Narrow","Titillium Web","Arimo","Nunito","Fira Sans","Nanum Gothic","Noto Serif","ZCOOL QingKe HuangYou","Work Sans","Dosis","Rubik","Quicksand","Inconsolata","Noto Sans KR","Hind","Crimson Text","Oxygen","Lobster","Noto Serif TC","Noto Serif SC","Libre Baskerville","B612","Bitter","Libre Franklin","Indie Flower","Josefin Sans","Anton","Cabin","Fjalla One","B612 Mono","Exo 2","Nunito Sans","Arvo","Encode Sans Condensed","ZCOOL KuaiLe","Noto Sans JP","Hind Siliguri","Varela Round","Karla","Pacifico","Abel","Shadows Into Light","Yanone Kaffeesatz","Righteous","Dancing Script","Merriweather Sans","Source Serif Pro","Kanit","Abril Fatface","Exo","Bree Serif","Acme","Comfortaa","Asap","Ubuntu Condensed","Cairo","Amatic SC","Catamaran","Signika","EB Garamond","Questrial","Teko","Heebo","Archivo Narrow","Permanent Marker","Play","Noto Sans TC","Source Code Pro","Crete Round","Maven Pro","Hind Madurai","Cuprum","Gloria Hallelujah","Francois One","Fira Sans Condensed","PT Sans Caption","Viga","Rokkitt","Assistant","Alegreya","Domine","Patua One","Courgette","Rajdhani","Prompt","Cinzel","Vollkorn","Satisfy","Istok Web","Ropa Sans","Alegreya Sans","Old Standard TT","Special Elite","ABeeZee","Cantarell","Concert One","Gochi Hand","Amiri","Cardo","Kaushan Script","Barlow","Orbitron","Caveat","Great Vibes","Quattrocento Sans","Cookie","Tinos","Noticia Text","News Cycle","Hammersmith One","Arapey","Signika Negative","Cormorant Garamond","Barlow Condensed","Merienda","Poiret One","Alfa Slab One","Lobster Two","Pathway Gothic One","Fredoka One","Monda","Nanum Myeongjo","Russo One","Hind Guntur","Kalam","Tangerine","Do Hyeon","Archivo Black","Noto Sans SC","BenchNine","Tenor Sans","Passion One","Chivo","Volkhov","Ultra","Playfair Display SC","Pontano Sans","Marck Script","Cabin Condensed","Sigmar One","Fira Sans Extra Condensed","Philosopher","Sacramento","Handlee","M PLUS 1p","Overpass","Josefin Slab","Monoton","Boogaloo","Gudea","Luckiest Guy","Didact Gothic","Quattrocento","IBM Plex Sans","Yantramanav","Khand","Changa","Sorts Mill Goudy","Armata","Martel","Bangers","Tajawal","Sawarabi Mincho","Iceberg","Zilla Slab","Ruda","Hind Vadodara","Neucha","Lalezar","El Messiri","Patrick Hand","Unica One","Pragati Narrow","Vidaloka","Neuton","Prata","Economica","Taviraj","Press Start 2P","Yrsa","Sanchez","Carter One","Averia Libre","Hanalei Fill","Audiowide","Adamina","Advent Pro","Barlow Semi Condensed","Shrikhand","Alice","Paytone One","Architects Daughter","Enriqueta","Frank Ruhl Libre","Bad Script","Yellowtail","PT Serif Caption","Montserrat Alternates","Amaranth","Gentium Basic","PT Mono","Gentium Book Basic","Khula","Antic Slab","Prosto One","Shadows Into Light Two","Arbutus Slab","Glegoo","Sarala","Jura","K2D","Grand Hotel","Julius Sans One","Kreon","Playball","Scada","Oleo Script","Rock Salt","Covered By Your Grace","Ubuntu Mono","Damion","Pridi","Actor","Fugaz One","Karma","Sintony","Average","Alegreya Sans SC","Electrolize","Bai Jamjuree","Niramit","Mali","Krub","KoHo","Kodchasan","Fahkwang","Homemade Apple","Saira Extra Condensed","Marmelad","Michroma","Lusitana","Baloo","Mitr","Jaldi","Chakra Petch","Bungee","Allura","Parisienne","Oranienbaum","Nothing You Could Do","Allerta Stencil","Varela","Anaheim","Unna","Chewy","Forum","Happy Monkey","Reenie Beanie","Molengo","Cormorant","Sawarabi Gothic","Cantata One","Black Ops One","Archivo","Bevan","Saira","Ovo","Alex Brush","Nanum Gothic Coding","Coustard","Rochester","VT323","Pangolin","Scheherazade","Niconne","Spinnaker","Nobile","Rambla","Allerta","Pinyon Script","Fredericka the Great","Charmonman","Srisakdi","Leckerli One","Quantico","Saira Semi Condensed","Nanum Pen Script","Syncopate","Reem Kufi","Rancho","Space Mono","Lustria","Rasa","Italianno","Cabin Sketch","Marcellus","Arsenal","Aldrich","Mr Dafoe","IBM Plex Serif","Lilita One","Magra","Kameron","Caveat Brush","Coda","Alef","Overlock","Fauna One","Gothic A1","Itim","Palanquin","Biryani","Basic","Antic","Days One","Carrois Gothic","Squada One","Coming Soon","Radley","Changa One","Share","Slabo 13px","Contrail One","Bowlby One SC","Carme","Berkshire Swash","Cousine","Sue Ellen Francisco","Just Another Hand","Titan One","Bungee Inline","Noto Serif JP","Noto Serif KR","Yeseva One","Mukta Vaani","Caudex","Candal","Aclonica","Lateef","Abhaya Libre","Buenard","Spectral","IM Fell Double Pica","Martel Sans","Padauk","Rufina","Six Caps","Lekton","Voltaire","Eczar","Anonymous Pro","Wendy One","Racing Sans One","Limelight","Mada","Petit Formal Script","Share Tech Mono","Yesteryear","Kurale","Oxygen Mono","Secular One","M PLUS Rounded 1c","Marcellus SC","Nanum Brush Script","Cinzel Decorative","Marvel","Sirin Stencil","Alegreya SC","Saira Condensed","Aladin","Rosario","Arima Madurai","Metrophobic","Norican","Annie Use Your Telescope","Nixie One","Jockey One","Ceviche One","Maitree","Londrina Solid","Pattaya","Copse","Baloo Bhaina","Freckle Face","Markazi Text","Gruppo","Telex","Skranji","Encode Sans","Shojumaru","Raleway Dots","Goudy Bookletter 1911","Andada","Belleza","Schoolbell","Average Sans","Doppio One","Corben","Tauri","Calligraffitti","Homenaje","Mountains of Christmas","Love Ya Like A Sister","Bubblegum Sans","Risque","Puritan","Kelly Slab","Judson","Cutive","Bentham","Sumana","Life Savers","Allan","Mukta Malar","Herr Von Muellerhoff","Notable","Carrois Gothic SC","Gilda Display","Asap Condensed","Balthazar","Duru Sans","Emilys Candy","Graduate","Kristi","Trirong","Cutive Mono","Halant","Faster One","Fira Mono","Suravaram","Palanquin Dark","The Girl Next Door","Delius","IBM Plex Mono","Capriola","Arizonia","Inder","Averia Serif Libre","Amethysta","Aref Ruqaa","Chelsea Market","Baloo Bhaijaan","Vesper Libre","Cambo","Trocchi","Mr De Haviland","Lemonada","Cormorant SC","Mouse Memoirs","Amiko","IBM Plex Sans Condensed","Merienda One","Andika","Mate","Federo","Poly","Rammetto One","Rozha One","Pompiere","Cambay","Cormorant Upright","Oregano","Knewave","Rouge Script","Gabriela","Kadwa","Proza Libre","Sedgwick Ave","Laila","Artifika","Seaweed Script","Qwigley","Gravitas One","Montez","Rye","Metamorphous","Give You Glory","Kosugi","Alike","Athiti","Short Stack","Uncial Antiqua","Clicker Script","Bowlby One","Cormorant Infant","Holtwood One SC","Quando","Prociono","Expletus Sans","Chonburi","Strait","Convergence","Sniglet","Fanwood Text","Iceland","Fondamento","Vast Shadow","Sarpanch","Denk One","Suranna","Lily Script One","Ranga","Sunflower","IM Fell English","Podkova","Crafty Girls","Elsie","Cedarville Cursive","Baumans","Wire One","Mako","Sofia","NTR","Mirza","Spicy Rice","Brawler","Harmattan","Crushed","Sriracha","Faustina","Patrick Hand SC","Gurajada","UnifrakturMaguntia","Walter Turncoat","IM Fell DW Pica","Over the Rainbow","Fontdiner Swanky","Bilbo Swash Caps","Belgrano","Imprima","Della Respira","Euphoria Script","Loved by the King","Tulpen One","Oleo Script Swash Caps","Frijole","Zeyada","Waiting for the Sunrise","Pavanam","Meddon","Megrim","Port Lligat Slab","Aguafina Script","Salsa","Ledger","La Belle Aurore","Just Me Again Down Here","Medula One","Rubik Mono One","Ramabhadra","Cherry Swash","McLaren","Amita","Tienne","Baloo Paaji","Shanti","Delius Swash Caps","Dekko","Lemon","Suez One","Ruslan Display","Sansita","Gafata","Nosifer","Spirax","Montserrat Subrayada","Katibeh","Averia Sans Libre","Wallpoet","Dawning of a New Day","Mallanna","Share Tech","Nova Round","Stardos Stencil","Vampiro One","Orienta","Nova Square","Codystar","Finger Paint","Bellefair","Alike Angular","Coda Caption","Galada","Quintessential","Miriam Libre","Unkempt","Atma","Fjord One","Milonga","Spectral SC","Voces","Nova Mono","Germania One","Habibi","IM Fell English SC","Bungee Shade","Headland One","Sail","Arya","Scope One","Black Han Sans","Encode Sans Semi Condensed","Yatra One","Londrina Outline","BioRhyme","Rakkas","Cantora One","Kosugi Maru","Kranky","Chicle","Mandali","Overpass Mono","Krona One","David Libre","Geo","Vibur","Engagement","Baloo Tamma","Slackey","Pirata One","Cherry Cream Soda","Baloo Chettan","Encode Sans Semi Expanded","Dynalight","Mate SC","Peralta","Nova Slim","Fenix","Sura","Amarante","Creepster","Cagliostro","Kite One","Numans","Rationale","Mrs Saint Delafield","Kotta One","League Script","Timmana","Condiment","Chela One","Antic Didone","Mukta Mahee","Dorsa","Poller One","Mystery Quest","Paprika","Farsan","Nova Flat","Chau Philomene One","Stoke","Baloo Bhai","IM Fell French Canon","Rosarivo","Simonetta","Sarina","Baloo Thambi","Asul","Englebert","Mogra","Delius Unicase","Buda","Stint Ultra Expanded","Stalemate","Ribeye","Bubbler One","Text Me One","Maiden Orange","Petrona","Flamenco","Underdog","Coiny","Joti One","Stint Ultra Condensed","Encode Sans Expanded","Junge","Ruluko","Esteban","East Sea Dokdo","UnifrakturCook","Port Lligat Sans","Mina","Princess Sofia","Autour One","Trade Winds","Wellfleet","IM Fell French Canon SC","Gaegu","Inknut Antiqua","Sancreek","Trykker","Ranchers","Plaster","Lovers Quarrel","Swanky and Moo Moo","Eater","Sonsie One","Stylish","Black And White Picture","Meera Inimai","Almendra","Henny Penny","Jua","Kirang Haerang","Eagle Lake","New Rocker","Gugi","Poor Story","Gamja Flower","Song Myung","Dokdo","Cute Font","Hi Melody","Yeon Sung","Overlock SC","Fresca","Averia Gruesa Libre","Diplomata SC","Linden Hill","Donegal One","Purple Purse","Italiana","Croissant One","Inika","Manuale","Glass Antiqua","Elsie Swash Caps","Revalia","Galindo","Ramaraja","Julee","Molle","Ruge Boogie","Chango","Marko One","Rhodium Libre","Redressed","Oldenburg","Fascinate Inline","Flavors","IM Fell Great Primer","Ravi Prakash","Offside","Akronim","Bilbo","Cormorant Unicase","Barrio","Sree Krushnadevaraya","Combo","Monofett","Snippet","Kavoon","MedievalSharp","Miltonian Tattoo","Ruthie","Jim Nightshade","Diplomata","Griffy","Asset","IM Fell DW Pica SC","Keania One","Kumar One","Monsieur La Doulaise","Smythe","Dr Sugiyama","Baloo Tammudu","Tillana","Rum Raisin","Lancelot","Irish Grover","Modak","Sahitya","Montaga","Mrs Sheppards","Bigshot One","Margarine","Modern Antiqua","Caesar Dressing","Devonshire","Metal Mania","Jacques Francois Shadow","Galdeano","Jomhuria","Chathura","Meie Script","IM Fell Great Primer SC","Baloo Da","Atomic Age","Kavivanar","Sunshiney","Bahiana","Seymour One","Asar","Ribeye Marrow","Miniver","Felipa","Macondo","Vollkorn SC","Snowburst One","Ewert","Original Surfer","Zilla Slab Highlight","IM Fell Double Pica SC","Trochut","Astloch","Goblin One","Kenia","Nova Script","Arbutus","Piedra","Warnes","Libre Barcode 128","Romanesco","Almendra Display","Unlock","Nova Cut","Miss Fajardose","Bigelow Rules","Almendra SC","Miltonian","Jolly Lodger","Nova Oval","Bonbon","Smokum","Londrina Shadow","Tenali Ramakrishna","Bungee Outline","Passero One","Sedgwick Ave Display","Jacques Francois","Butterfly Kids","Lakki Reddy","Libre Barcode 39 Extended Text","Libre Barcode 39 Extended","Geostar Fill","Gorditas","Fascinate","Bungee Hairline","Sofadi One","Libre Barcode 39 Text","Libre Barcode 39","Libre Barcode 128 Text","Gidugu","Supermercado One","Sevillana","Stalinist One","Aubrey","Macondo Swash Caps","Geostar","Erica One","Federant","Peddana","Fruktur","Londrina Sketch","Butcherman","Mr Bedfort","Emblema One","Hanalei","Dhurjati","Kumar One Outline","BioRhyme Expanded"]},s={getRandomFont(e){const t=i[e];return t[n.A.randomInt(0,t.length-1)]},elementForFont(e,t){const r=((e,t)=>{let r=`https://fonts.googleapis.com/css?family=${e.replace(" ","+")}&display=swap`;return t&&(r+=`&text=${t}`),r})(e,t);return(e=>{const t=document.createElement("link");return t.href=e,t.rel="stylesheet",t})(r)}}},725:(e,t,r)=>{r.d(t,{A:()=>n});const n={randomInt:(e,t)=>Math.floor(Math.random()*(t-e+1))+e}},493:(e,t,r)=>{var n={"./head_controller.js":393,"./nameplate_controller.js":714,"./page_controller.js":726,"./picker_controller.js":20};function i(e){var t=s(e);return r(t)}function s(e){if(!r.o(n,e)){var t=new Error(`Cannot find module '${e}'`);throw t.code="MODULE_NOT_FOUND",t}return n[e]}i.keys=function(){return Object.keys(n)},i.resolve=s,e.exports=i,i.id=493}},n={};function i(e){var t=n[e];if(void 0!==t)return t.exports;var s=n[e]={exports:{}};return r[e](s,s.exports,i),s.exports}i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{class e extends HTMLElement{constructor(){super(),this.isIframeLoaded=!1,this.setupDom()}static get observedAttributes(){return["videoid","playlistid"]}connectedCallback(){this.addEventListener("pointerover",e.warmConnections,{once:!0}),this.addEventListener("click",(()=>this.addIframe()))}get videoId(){return encodeURIComponent(this.getAttribute("videoid")||"")}set videoId(e){this.setAttribute("videoid",e)}get playlistId(){return encodeURIComponent(this.getAttribute("playlistid")||"")}set playlistId(e){this.setAttribute("playlistid",e)}get videoTitle(){return this.getAttribute("videotitle")||"Video"}set videoTitle(e){this.setAttribute("videotitle",e)}get videoPlay(){return this.getAttribute("videoPlay")||"Play"}set videoPlay(e){this.setAttribute("videoPlay",e)}get videoStartAt(){return this.getAttribute("videoStartAt")||"0"}get autoLoad(){return this.hasAttribute("autoload")}get noCookie(){return this.hasAttribute("nocookie")}get posterQuality(){return this.getAttribute("posterquality")||"hqdefault"}get posterLoading(){return this.getAttribute("posterloading")||"lazy"}get params(){return`start=${this.videoStartAt}&${this.getAttribute("params")}`}set params(e){this.setAttribute("params",e)}setupDom(){const e=this.attachShadow({mode:"open"});let t="";window.liteYouTubeNonce&&(t=`nonce="${window.liteYouTubeNonce}"`),e.innerHTML=`\n      <style ${t}>\n        :host {\n          contain: content;\n          display: block;\n          position: relative;\n          width: 100%;\n          padding-bottom: calc(100% / (16 / 9));\n        }\n\n        @media (max-width: 40em) {\n          :host([short]) {\n            padding-bottom: calc(100% / (9 / 16));\n          }\n        }\n\n        #frame, #fallbackPlaceholder, iframe {\n          position: absolute;\n          width: 100%;\n          height: 100%;\n          left: 0;\n        }\n\n        #frame {\n          cursor: pointer;\n        }\n\n        #fallbackPlaceholder {\n          object-fit: cover;\n        }\n\n        #frame::before {\n          content: '';\n          display: block;\n          position: absolute;\n          top: 0;\n          background-image: linear-gradient(180deg, #111 -20%, transparent 90%);\n          height: 60px;\n          width: 100%;\n          z-index: 1;\n        }\n\n        #playButton {\n          width: 68px;\n          height: 48px;\n          background-color: transparent;\n          background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 68 48"><path d="M66.52 7.74c-.78-2.93-2.49-5.41-5.42-6.19C55.79.13 34 0 34 0S12.21.13 6.9 1.55c-2.93.78-4.63 3.26-5.42 6.19C.06 13.05 0 24 0 24s.06 10.95 1.48 16.26c.78 2.93 2.49 5.41 5.42 6.19C12.21 47.87 34 48 34 48s21.79-.13 27.1-1.55c2.93-.78 4.64-3.26 5.42-6.19C67.94 34.95 68 24 68 24s-.06-10.95-1.48-16.26z" fill="red"/><path d="M45 24 27 14v20" fill="white"/></svg>');\n          z-index: 1;\n          border: 0;\n          border-radius: inherit;\n        }\n\n        #playButton:before {\n          content: '';\n          border-style: solid;\n          border-width: 11px 0 11px 19px;\n          border-color: transparent transparent transparent #fff;\n        }\n\n        #playButton,\n        #playButton:before {\n          position: absolute;\n          top: 50%;\n          left: 50%;\n          transform: translate3d(-50%, -50%, 0);\n          cursor: inherit;\n        }\n\n        /* Post-click styles */\n        .activated {\n          cursor: unset;\n        }\n\n        #frame.activated::before,\n        #frame.activated > #playButton {\n          display: none;\n        }\n      </style>\n      <div id="frame">\n        <picture>\n          <source id="webpPlaceholder" type="image/webp">\n          <source id="jpegPlaceholder" type="image/jpeg">\n          <img id="fallbackPlaceholder" referrerpolicy="origin" loading="lazy">\n        </picture>\n        <button id="playButton"></button>\n      </div>\n    `,this.domRefFrame=e.querySelector("#frame"),this.domRefImg={fallback:e.querySelector("#fallbackPlaceholder"),webp:e.querySelector("#webpPlaceholder"),jpeg:e.querySelector("#jpegPlaceholder")},this.domRefPlayButton=e.querySelector("#playButton")}setupComponent(){this.initImagePlaceholder(),this.domRefPlayButton.setAttribute("aria-label",`${this.videoPlay}: ${this.videoTitle}`),this.setAttribute("title",`${this.videoPlay}: ${this.videoTitle}`),(this.autoLoad||this.isYouTubeShort())&&this.initIntersectionObserver()}attributeChangedCallback(e,t,r){switch(e){case"videoid":case"playlistid":case"videoTitle":case"videoPlay":t!==r&&(this.setupComponent(),this.domRefFrame.classList.contains("activated")&&(this.domRefFrame.classList.remove("activated"),this.shadowRoot.querySelector("iframe").remove(),this.isIframeLoaded=!1))}}addIframe(e=!1){if(!this.isIframeLoaded){let t=e?0:1;const r=this.noCookie?"-nocookie":"";let n;n=this.playlistId?`?listType=playlist&list=${this.playlistId}&`:`${this.videoId}?`,this.isYouTubeShort()&&(this.params=`loop=1&mute=1&modestbranding=1&playsinline=1&rel=0&enablejsapi=1&playlist=${this.videoId}`,t=1);const i=`\n<iframe frameborder="0" title="${this.videoTitle}"\n  allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen\n  src="https://www.youtube${r}.com/embed/${n}autoplay=${t}&${this.params}"\n></iframe>`;this.domRefFrame.insertAdjacentHTML("beforeend",i),this.domRefFrame.classList.add("activated"),this.isIframeLoaded=!0,this.attemptShortAutoPlay(),this.dispatchEvent(new CustomEvent("liteYoutubeIframeLoaded",{detail:{videoId:this.videoId},bubbles:!0,cancelable:!0}))}}initImagePlaceholder(){var e;const t=`https://i.ytimg.com/vi_webp/${this.videoId}/${this.posterQuality}.webp`,r=`https://i.ytimg.com/vi/${this.videoId}/${this.posterQuality}.jpg`;this.domRefImg.fallback.loading=this.posterLoading,this.domRefImg.webp.srcset=t,this.domRefImg.jpeg.srcset=r,this.domRefImg.fallback.src=r,this.domRefImg.fallback.setAttribute("aria-label",`${this.videoPlay}: ${this.videoTitle}`),null==(e=this.domRefImg)||null==(e=e.fallback)||e.setAttribute("alt",`${this.videoPlay}: ${this.videoTitle}`)}initIntersectionObserver(){new IntersectionObserver(((t,r)=>{t.forEach((t=>{t.isIntersecting&&!this.isIframeLoaded&&(e.warmConnections(),this.addIframe(!0),r.unobserve(this))}))}),{root:null,rootMargin:"0px",threshold:0}).observe(this)}attemptShortAutoPlay(){this.isYouTubeShort()&&setTimeout((()=>{var e;null==(e=this.shadowRoot.querySelector("iframe"))||null==(e=e.contentWindow)||e.postMessage('{"event":"command","func":"playVideo","args":""}',"*")}),2e3)}isYouTubeShort(){return""===this.getAttribute("short")&&window.matchMedia("(max-width: 40em)").matches}static addPrefetch(e,t){const r=document.createElement("link");r.rel=e,r.href=t,r.crossOrigin="true",document.head.append(r)}static warmConnections(){e.isPreconnected||window.liteYouTubeIsPreconnected||(e.addPrefetch("preconnect","https://i.ytimg.com/"),e.addPrefetch("preconnect","https://s.ytimg.com"),e.addPrefetch("preconnect","https://www.youtube.com"),e.addPrefetch("preconnect","https://www.google.com"),e.addPrefetch("preconnect","https://googleads.g.doubleclick.net"),e.addPrefetch("preconnect","https://static.doubleclick.net"),e.isPreconnected=!0,window.liteYouTubeIsPreconnected=!0)}}e.isPreconnected=!1,customElements.define("lite-youtube",e);var t=i(689);const r=t.lg.start(),n=i(493);r.load((e=>e.keys().map((t=>((e,t)=>{const r=(e=>{const t=(e.match(/^(?:\.\/)?(.+)(?:[_-]controller\..+?)$/)||[])[1];if(t)return t.replace(/_/g,"-").replace(/\//g,"--")})(t);if(r)return(({default:e},t)=>{if("function"==typeof e)return{identifier:t,controllerConstructor:e}})(e(t),r)})(e,t))).filter((e=>e)))(n))})();